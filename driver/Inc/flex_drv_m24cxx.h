/******************************************************************************
 Copyright (c) 2018 Flex(Shanghai) Co.,Ltd.
 All rights reserved.

 [Module Name]:
 		flex_drv_m24cxx.h
 [Date]:
 		2018-07-09
 [Author]:
 		Tim Lin
 [Reversion History]:
 		v1.0
*******************************************************************************/
#ifndef _FLEX_DRV_M24CXX_H_
#define _FLEX_DRV_M24CXX_H_

#ifdef __cplusplus
extern "C" {
#endif

/*========================================================================================================
										I N C L U D E
========================================================================================================*/
#include <stdbool.h>
#include "flex_common.h"
#include "i2c.h"


/*========================================================================================================
										D E F I N E
========================================================================================================*/
//#define  M24CXX_NON_BLOCK_ACCESS

//M24C08 - 8Kb, 1024KB
#define M24CXX_SIZE			1024
#define M24CXX_BANK_SIZE		256
#define M24CXX_PAGE_SIZE		16


/*========================================================================================================
										T Y P E D E F
========================================================================================================*/
typedef enum
{
	M24CXX_OK,
	M24CXX_INVALID_PARA,
	M24CXX_BUSY,
	M24CXX_ERROR,
	M24CXX_TIMEOUT,
}M24CXX_STATUS;


typedef  void (*M24CXX_CALLBACK) ( M24CXX_STATUS status, uint16_t context);



/*========================================================================================================
										V A R I A B L E S
========================================================================================================*/

/*========================================================================================================
										F U N C T I O N
========================================================================================================*/
void M24CXX_Init(void);
M24CXX_STATUS M24CXX_Read(uint16_t offset, uint8_t *data, uint16_t size);
M24CXX_STATUS M24CXX_Write(uint16_t offset, uint8_t *source, uint16_t size);
#ifdef M24CXX_NON_BLOCK_ACCESS
M24CXX_STATUS M24CXX_NonBlockWrite(uint16_t offset, uint8_t *source, uint16_t size, M24CXX_CALLBACK cb, uint16_t context);
#endif

/*========================================================================================================
										End
========================================================================================================*/
#ifdef __cplusplus
}
#endif

#endif//_FLEX_DRV_M24CXX_H_

